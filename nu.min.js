// Nu 0.0.2 Copyright (C) 2013 @yuya, MIT License.
!function(a,b,c){function d(){try{return(new Image).doScroll(),b.fireEvent("DOMContentLoaded",b.createEventObject())}catch(a){setTimeout(d,64)}}function e(a){var b=Object.prototype.toString.call(a);return"[object NodeList]"===b||"[object HTMLCollection]"===b}function f(a,b){for(var c=0,d=a.length;d;c++,d--)b.call(a[c],a[c])}function g(a){var b=[];return f(a,function(a){b.push("on"+a)}),b}b.getElementsByClassName||(b.getElementsByClassName=function(a){return b.querySelectorAll("."+a)}),Object.keys||(Object.keys=function(a){var b,c=[],d=0;for(b in a)a.hasOwnProperty(b)&&(c[d++]=b);return c}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var h,i="Nu",j=!1,k=[],l=b.createElement("div"),m=/complete|loaded|interactive/,n={touchEvent:"ontouchstart"in a,addEventListener:"addEventListener"in a,removeEventListener:"removeEventListener"in a,orientationchange:"onorientationchange"in a,pageShow:"onpageshow"in a,createEvent:"createEvent"in b,classList:!!l.classList},o=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/(?:iphone\sos|ip[oa]d.*os)\s([\d_]+)/),c=a.match(/(android)\s+([\d.]+)/),d=!!b,e=!!c,f=function(){var b=/(webkit)[ \/]([\w.]+)/.exec(a)||/(firefox)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||[];return{name:b[1],version:parseFloat(b[2])}}(),g=function(){return n.touchEvent&&(d||e)?d?"ios":"android":"desktop"}(),h=function(){return"desktop"!==g?parseFloat((b||c).pop().split(/\D/).join(".")):null}();return{platform:g,browser:f.name,version:{os:h,browser:f.version},oldIE:"msie"===f.name&&f.version<9,oldAndroid:e&&4>h}}(),p={touchstart:n.touchEvent?"touchstart":"mousedown",touchmove:n.touchEvent?"touchmove":"mousemove",touchend:n.touchEvent?"touchend":"mouseup",orientationchange:n.orientationchange?"orientationchange":"resize",pageshow:n.pageShow?"pageshow":this.domcontentloaded,domcontentloaded:o.oldIE?d():"DOMContentLoaded"};h=function(){function a(a,b){var c=0,d=this.length=a.length;for(this.selector=b;d;c++,d--)this[c]=a[c];return this}function d(c,d){var f,g=/^(.+[\#\.\s\[\*>:,]|[\[:])/,h=null;if("string"==typeof c)d=d||b,h=g.test(c)?d.querySelectorAll(c):"#"===c[0]?[d.getElementById(c.substring(1,c.length))]:"."===c[0]?d.getElementsByClassName(c.substring(1,c.length)):d.getElementsByTagName(c);else if(c)if(1===c.nodeType||c===window||c===b||c===b.body)h=[c];else if(e(c)||Array.isArray(c)&&c.length&&c[0].nodeType)h=c;else if("function"==typeof c)f=c,j?f():k.push(f);else if(c instanceof a)return a;return new a(h||[],c)}return a.prototype={constructor:a,ready:function(a){var c=p.domcontentloaded+" "+p.pageshow;return m.test(b.readyState)?(a(this),j=!0):this.on(c,function(){j||a(this),j=!0}),this},each:function(a){for(var b=0,c=this.length;c;b++,c--)a.call(this[b],b);return this},match:function(a){for(var b=this.length;b--;)if(a.call(this[b],b))return this[b];return null},index:function(a){var b=-1;return this.match(function(c){return this===a?(b=c,!0):!1}),b},on:function(a,b,d){var e,f,h;for(n.addEventListener?(a=a.split(" "),d=d||!1,e="addEventListener"):(a=g(a.split(" ")),d=c,e="attachEvent"),f=0,h=a.length;h;f++,h--)this.each(function(){this[e](a[f],b,d)});return this},off:function(a,b,d){var e,f,h;for(n.removeEventListener?(a=a.split(" "),d=d||!1,e="removeEventListener"):(a=g(a.split(" ")),d=c,e="detachEvent"),f=0,h=a.length;h;f++,h--)this.each(function(){this[e](a[f],b,d)});return this},trigger:function(a,c,d){var e;c=c||!0,d=d||!1,n.createEvent?(e=b.createEvent("Event"),e.initEvent(a,c,d),this.each(function(){this.dispatchEvent(e)})):this.each(function(){this.fireEvent("on"+a)})},hasClass:function(a){return n.classList?this.match(function(){return this.classList.contains(a)}):(a=" "+a,this.match(function(){return(" "+this.className).indexOf(a)>-1}))},addClass:function(a){n.classList?this.each(function(){this.classList.add(a)}):this.each(function(){d(this).hasClass(a)||(this.className+=(this.className?" ":"")+a)})},removeClass:function(a){n.classList?this.each(function(){this.classList.remove(a)}):this.each(function(){this.className=this.className.replace(new RegExp("(\\s|^)"+a+"(\\s|$)")," ").replace(/^s+|\s+$/g,"")})}},d}(),a[i]=a[i]||h}(this,this.document);