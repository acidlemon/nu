// Nu 0.0.3 Copyright (C) 2013 @yuya, MIT License.
// See https://github.com/yhmt/nu
!function(a,b){function c(){try{return(new Image).doScroll(),b.fireEvent("DOMContentLoaded",b.createEventObject())}catch(a){setTimeout(c,64)}}function d(a){return null!=a&&a===a.window}function e(a){return null!=a&&"[object HTMLDocument]"===L.call(a)}function f(a){return!(!a||1!==a.nodeType)}function g(a){return Array.isArray(a)}function h(a){return a===Object(a)}function i(a){return null!=a&&h(a)&&!d(a)&&a.__proto__===Object.prototype}function j(a){return"[object Function]"===L.call(a)}function k(a){return"[object String]"===L.call(a)}function l(a){return"[object Number]"===L.call(a)}function m(a){return l(a)&&a!==+a}function n(a){return a===!0||a===!1||"[object Boolean]"===L.call(a)}function o(a){return null===a}function p(a){return void 0===a}function q(a){return"[object Date]"===L.call(a)}function r(a){return"[object RegExp]"===L.call(a)}function s(a){var b=L.call(a);return"[object NodeList]"===b||"[object HTMLCollection]"===b}function t(a){var b;return"defaultPrevented"in a||(b=a.preventDefault,a.defaultPrevented=!1,a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}),a}function u(a){var c;return C.createEvent?(c=b.createEvent("Event"),c.initEvent(a,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null)):c=b.createEventObject(),c.isDefaultPrevented=function(){return this.defaultPrevented},t(c)}function v(a){return J.call(a)}function w(a,b){var c,d,e,f=0;if(g(a))for(c=a.length;c;++f,--c)b(a[f],f);else for(d=Object.keys(a),c=d.length;c;++f,--c)e=d[f],b(e,a[e])}function x(a,b){var c,d,e,f=0,h={};if(g(a)){for(c=a.length;c;++f,--c)if(b(a[f]),f)return a[f]}else if(i(a))for(d=Object.keys(a),c=d.length;c;++f,--c)if(e=d[f],b(e,a[e],f))return h[e]=a[e],h;return null}function y(a){var b=[];return w(a,function(a){b.push("on"+a)}),b}b.getElementsByClassName||(b.getElementsByClassName=function(a){return b.querySelectorAll("."+a)}),Date.now||(Date.now=function(){return+new Date}),Object.keys||(Object.keys=function(a){var b,c=[],d=0;for(b in a)a.hasOwnProperty(b)&&(c[d++]=b);return c}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var z,A,B=b.createElement("div"),C={touchEvent:"ontouchstart"in a,addEventListener:"addEventListener"in a,removeEventListener:"removeEventListener"in a,orientationchange:"onorientationchange"in a,pageShow:"onpageshow"in a,createEvent:"createEvent"in b,classList:!!B.classList},D=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/(?:iphone\sos|ip[oa]d.*os)\s([\d_]+)/),c=a.match(/(android)\s+([\d.]+)/),d=!!b,e=!!c,f=function(){var b=/(webkit)[ \/]([\w.]+)/.exec(a)||/(firefox)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||[];return{name:b[1],version:parseFloat(b[2])}}(),g=function(){return C.touchEvent&&(d||e)?d?"ios":"android":"desktop"}(),h=function(){return"desktop"!==g?parseFloat((b||c).pop().split(/\D/).join(".")):null}();return{platform:g,browser:f.name,version:{os:h,browser:f.version},oldIE:"msie"===f.name&&f.version<9,oldAndroid:e&&4>h}}(),E={touchstart:C.touchEvent?"touchstart":"mousedown",touchmove:C.touchEvent?"touchmove":"mousemove",touchend:C.touchEvent?"touchend":"mouseup",touchcancel:C.touchEvent?"touchcancel":"mouseleave",orientationchange:C.orientationchange?"orientationchange":"resize",pageshow:C.pageShow?"pageshow":this.domcontentloaded,domcontentloaded:D.oldIE?c():"DOMContentLoaded"},F=C.addEventListener?"addEventListener":"attachEvent",G=C.removeEventListener?"removeEventListener":"detachEvent",H=Array.prototype,I=Object.prototype,J=(Function.prototype,H.push,H.slice),K=H.concat,L=I.toString,M=(I.hasOwnProperty,/complete|loaded|interactive/),N=/^(.+[\#\.\s\[\*>:,]|[\[:])/;z=function(a,c){var d,e=null;if("string"==typeof a)c=c||b,e=N.test(a)?c.querySelectorAll(a):"#"===a[0]?[c.getElementById(a.substring(1,a.length))]:"."===a[0]?c.getElementsByClassName(a.substring(1,a.length)):c.getElementsByTagName(a);else if(a)if(1===a.nodeType||a===window||a===b||a===b.body)e=[a];else if(s(a)||g(a)&&a.length&&a[0].nodeType)e=a;else{if(j(a))return d=a,A.ready(d);if(a instanceof z)return z}return new z.fn.init(e||[],a)},z.fn=z.prototype={constructor:z,init:function(a,b){var c=0,d=this.length=a.length;for(this.selector=b,this._data={},this._delegates={};d;++c,--d)this[c]=a[c];return this},ready:function(a){var c=E.domcontentloaded+" "+E.pageshow;return M.test(b.readyState)?a():this.on(c,function(){a()}),this},each:function(a){for(var b=0,c=this.length;c;++b,--c)a.call(this[b],b);return this},match:function(a){for(var b=this.length;b--;)if(a.call(this[b],b))return this[b];return null},index:function(a){var b=-1;return this.match(function(c){return this===a?(b=c,!0):!1}),b},get:function(a){return null==a?v(this):0>a?this[this.length+a]:this[a]},on:function(a,b,c){function d(a,c){c=c||b,g.each(function(){this[F](a,c)})}function e(a){var e,f,h,i,k;e=g._delegates[a],f={selector:b,callback:c},e||(e=g._delegates[a]={listeners:[],handler:function(a){h=a.target,i=arguments,x(e.listeners,function(a){return k=z(a.selector).match(function(){return this.contains(h)}),k&&(j(a.callback)?a.callback.apply(k,i):a.callback.handleEvent&&a.callback.handleEvent.apply(k,i)),k})}},d(a,e.handler)),e.listeners.push(f)}var f,g=this;return k(a)&&(a=C.addEventListener?a.split(" "):y(a.split(" "))),f=k(b)?e:d,w(a,function(a){f(a)}),this},one:function(a,b,c){return this.on(a,b,c,1)},off:function(a,b,c){function d(a,c){c=c||b,g.each(function(){this[G](a,c)})}function e(a){var e,f;e=g._delegates[a],f=e.listeners,f&&f.length&&(p(c)?w(f,function(a,c){a.selector===b&&f.splice(c,1)}):x(f,function(a,d){return a.selector===b&&a.callback===c?(a.splice(d,1),!0):!1}),f.length||(d(a,e.handler),delete g._delegates[a]))}var f,g=this;return k(a)&&(a=C.removeEventListener?a.split(" "):y(a.split(" "))),f=k(b)?e:d,w(a,function(a){f(a)}),this},trigger:function(){var a,b,c=v(arguments);return k(c[0])?(a=c.shift(),b=u(a)):b=c.shift(),c.length&&(b._data=c),C.createEvent&&this.each(function(){this.dispatchEvent(b)}),this},hasClass:C.classList?function(a){return this.match(function(){return this.classList.contains(a)})}:function(a){return a=" "+a,this.match(function(){return(" "+this.className).indexOf(a)>-1})},addClass:C.classList?function(a){return this.each(function(){this.classList.add(a)})}:function(a){return this.each(function(){z(this).hasClass(a)||(this.className+=(this.className?" ":"")+a)})},removeClass:C.classList?function(a){return this.each(function(){this.classList.remove(a)})}:function(a){return this.each(function(){this.className=this.className.replace(new RegExp("(\\s|^)"+a+"(\\s|$)")," ").replace(/^s+|\s+$/g,"")})},toggleClass:function(a){var b;return this.each(function(){b=z(this),b.hasClass(a)?b.removeClass(a):b.addClass(a)}),this},find:function(a){var b;return this.each(function(){b=v(K(z(a,this)))}),z(b)},append:function(a){var b,c=this.length>1;return this.each(k(a)?function(){this.insertAdjacentHTML("beforeend",a)}:function(){b=this,f(a)?this.appendChild(c?a.cloneNode(!0):a):a instanceof z&&a.each(function(){b.appendChild(this)})})},prepend:function(a){var b,c=this.length>1;return this.each(k(a)?function(){this.insertAdjacentHTML("afterbegin",a)}:function(){b=this,f(a)?this.insertBefore(c?a.cloneNode(!0):a,this.firstChild):a instanceof z&&a.each(function(){b.insertBefore(this,b.firstChild)})})},closest:function(a){var b,c=[],d=v(z(a));return this.each(function(){for(b=this;b;){if(d.indexOf(b)>-1){-1===c.indexOf(b)&&c.push(b);break}b=b.parentNode}}),z(c)},attr:function(a,b){return a&&b?this.each(function(){this.setAttribute(a,b)}):(a&&this[0].getAttribute(a),this)},val:function(a){return a?this.each(function(){this.value=a}):this[0].value},remove:function(){return this.each(function(){this.parentNode.removeChild(this)})},empty:function(){return this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)})},html:function(a){return null==a?this[0].innerHTML:(f(a)?this.empty().append(a):this.each(function(){this.empty(),this.insertAdjacentHTML("afterbegin",a)}),this)},show:function(){return this.each(function(){this.style.display="block"})},hide:function(){return this.each(function(){this.style.display="none"})},toggle:function(){return this.each(function(){this.style.display=/dipslay:\s?none/.test(this.style)?"block":"none"})}},z.fn.init.prototype=z.fn,z.extend=z.fn.extend=function(){var a,b,c,d,e,f=v(arguments),k=f[0]||{},l=1,m=f.length,o=!1;for(n(k)&&(o=k,k=f[1]||{},++l),h(k)||j(k)||(k={}),m===l&&(k=this,--l);m;++l,--m)d=f[l],null!=d&&w(d,function(f){a=k[f],c=d[f],k!==c&&(b=g(c),o&&c&&(i(c)||b)?(b?(b=!1,e=a&&g(a)?a:[]):e=a&&i(a)?a:{},k[f]=z.extend(o,e,c)):p(c)||(k[f]=c))});return k},A=z(b),z.isWindow=d,z.isDocument=e,z.isElement=f,z.isArray=g,z.isObject=h,z.isPlainObject=i,z.isFunction=j,z.isString=k,z.isNumber=l,z.isNaN=m,z.isBoolean=n,z.isNull=o,z.isUndefined=p,z.isDate=q,z.isRegExp=r,z.isNodeList=s,z.toArray=v,z.support=C,z.userAgent=D,z.events=E,z.each=w,z.match=x,z.createEvent=u,a.Nu=a.nu=z}(this,this.document),function(a,b,c){function d(){n={}}function e(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"left":"right":c-d>0?"up":"down"}function f(){m=null,n.el&&(n.el.trigger("longtap"),d())}function g(){m&&clearTimeout(m),m=null}function h(){c.each([j,k,l,m],function(a){a&&clearTimeout(a)}),j=k=l=m=null,d()}function i(){var a,i,o,v,w,x=0,y=0;c(b).on(q,function(b){a=p?b.touches[0]:b,i=Date.now(),o=i-(n.last||i),v="tagName"in a.target?a.target:a.target.parentNode,n.el=c(v),j&&clearTimeout(j),n.x1=a.pageX,n.y1=a.pageY,o>0&&250>=o&&(n.isDoubleTap=!0),n.last=i,m=setTimeout(f,u)}).on(r,function(b){a=p?b.touches[0]:b,g(),n.x2=a.pageX,n.y2=a.pageY,x+=Math.abs(n.x1-n.x2),x+=Math.abs(n.y1-n.y2)}).on(s,function(){g(),n.x2&&Math.abs(n.x1-n.x2)>30||n.y2&&Math.abs(n.y1-n.y2)>30?l=setTimeout(function(){n.el.trigger("swipe"),n.el.trigger("swipe"+e(n.x1,n.x2,n.y1,n.y2)),d()},0):"last"in n&&(30>x&&30>y?k=setTimeout(function(){w=c.createEvent("tap"),w.cancelTouch=h,n.el.trigger(w),n.isDoubleTap?(n.el.trigger("doubletap"),d()):j=setTimeout(function(){j=null,n.el.trigger("singletap"),d()},250)},0):d(),x=y=0)}).on(t,h),c(window).on("scroll",h)}var j,k,l,m,n={},o=["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"],p=c.support.touchEvent,q=c.events.touchstart,r=c.events.touchmove,s=c.events.touchend,t=c.events.touchcancel,u=750;c(function(){i(),c.each(o,function(a){c.fn[a]=function(b){return this.on(a,b)}})})}(this,this.document,this.Nu);